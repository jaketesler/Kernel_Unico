#UDOO KERNEL CONFIGURATIONS

To anybody reading this, these are my personal notes and are in NO way things anybody else should do. I will make a formal README at some point with proper instructions


UDOO files are mainly located in /arch/arm/mach-mx6
To compile kernel, use custom included utility "udoo-kc"
See "udoo-kc --help" for help.


NOTE: For the sake of clarity, we need to define "GPIO pin".
The term "GPIO pin" has many different definitions, and so please use the following 'key' when referring to pins:
><br>GPIO "software pin" (SWP):
<br>This is the pin as defined in the graphical pin diagram 
<br>[e.g. pin number is the 'XX' value in /sys/class/gpio/gpioXX/direction]

><br>GPIO "kernel pin" (KNP):
<br>This is the name of the pin as defined in the alternate pin table documentation. 
<br>[e.g. the "CSI0\_DAT13" in '"MX6DL\_PAD\_CSI0\_DAT13\_\_UART4\_RXD,"', or the "GPIO\_1" in '"MX6DL\_PAD\_GPIO\_1\_\_PWM2\_PWMO,"'.]

><br>GPIO "hardware pin" (HWP):
<br>This is the pin number that corresponds to the silkscreen on the board (or the graphical pin documentation). 
<br>[e.g. D58, TX1]

><br>GPIO "dev pin" (DEVP):
<br>This isn't really a number, but we can use this to describe the /dev/ttyxxxx file a particular SWP or KWP refers to. 

As an example, GPIO SWP

<br>
## KERNEL File MODIFICATIONS
Two header files in arch/arm/mach-mx6
<br>Modified file drm.h in include/drm/
<br>added line in /arch/arm/mach-mx6/board-mx6q-sabresd.c
<br>modified '[static inline void mx6q\_seco\_UDOO\_init\_uart]' in board-mx6\_seco\_UDOO.c to include more UART ports

<br>
## SYSTEM
Made changes to (and added file) /etc/init/ttymxc3.conf
cmd: stty to fix baud rate of ports to 9600 [sudo stty -F /dev/ttymxc3 9600]
modified /etc/default/console-setup to include more ttys[#]


ps -ef | grep getty [to confirm login prompt dialogs]



## CONNECTIONS:
file in /dev : physical port : add'l conn.
<br>ttymxc0 : UART1
<br>ttymxc1 : UART2 : USB
<br>ttymxc2* : ? : ?
<br>ttymxc3 : UART4+R : TXRX1
<br>ttymxc4* : ? : ?
<br>*just appeared recently...out of nowhere.

###To connect: 
>Type into prompt:<br>screen /dev/tty[[whatever file it is, see above]] 115200
replace the brackets with the name of the connector
use "ls /dev/tty*" to find devices



## TO MAKE CHANGES TO GPIO DEFAULTS:
###Change the startup value of a gpio pin (input/outHigh/outLow):
>1) Open board-mx6sdl\_seco\_UDOO.h in /arch/arm/mx6 (or quad header file for that board instead)
<br>2) Move pin definition from one method to the method you want
<br>(e.g.) move '"MX6DL\_PAD\_GPIO\_0\_\_GPIO\_MODE,"' (including comma, excluding quotes) 
<br>from '"static unsigned int mx6dl\_set\_in\_outputmode\_high[]"'
<br>to '"static unsigned int mx6dl\_set\_in\_outputmode\_low[]"'
<br>to change from default outputHigh to outoutLow on boot.
<br>[NOTE: get name of GPIO software pin from the UDOO alternate pin definition table. GPIO will usually be listed under ALT5 as GPIO#\_IOxx where xx is the GPIO pin you want.]

Additionally, to change the default MODE of a GPIO pin (i.e. GPIO â€”> UART instead), remove it from these methods (or comment out) and change the definition above. There are many forms of the pin in the code (with only one uncommented), so just uncomment the one you want and comment the previous pin definition. 



LED protoblock is on GPIO20 / GPIO17

###To write to GPIO:
echo out > /sys/class/gpio/gpioxx/direction
echo 1 > /sys/class/gpio/gpioxx/value <-- high
echo 0 > /sys/class/gpio/gpioxx/value <-- low
[where xx is the number that corresponds to the pin noted on the graphical pin diagram (not the alt pin table)]